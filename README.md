### คู่มือการทำงานและวิธีใช้งาน

#### ภาพรวม

โครงการนี้เป็นเว็บแอปพลิเคชันที่ใช้แสดงข้อมูลแบบเรียลไทม์จากหลายแหล่งข้อมูล โดยจะแสดงสถานะต่างๆ ของแต่ละหน่วย (Station) และมีฟังก์ชันการซ่อนการ์ดที่มีค่าที่ไม่สมบูรณ์ (เช่น "undefined") รวมถึงการอัปเดตข้อมูลแบบอัตโนมัติทุก 3 นาที

#### ส่วนประกอบหลัก
1. **หน้าเว็บ (`index.html`, `realtime.html`, `history.html`)**
2. **ไฟล์สคริปต์ (`script.js`)**
3. **สไตล์ชีต (`style.css`)**
4. **โค้ดฝั่งเซิร์ฟเวอร์ (`app.py`)**
5. **ไฟล์การตั้งค่า URL (`urls.py`)**
6. **ไฟล์การจัดการฐานข้อมูล (`mongo.py`)**

### วิธีการใช้งาน

#### การติดตั้งและตั้งค่าเบื้องต้น
1. ติดตั้ง Python และ pip (ถ้ายังไม่ได้ติดตั้ง)
2. ติดตั้ง MongoDB และเริ่มใช้งานฐานข้อมูล MongoDB
3. สร้างและเปิดใช้งาน virtual environment
4. ติดตั้งแพ็กเกจที่จำเป็นจาก `requirements.txt`
   ```bash
   pip install -r requirements.txt
   ```

#### การรันเซิร์ฟเวอร์
1. เปิด terminal หรือ command prompt
2. รันเซิร์ฟเวอร์โดยใช้คำสั่ง:
   ```bash
   python app.py
   ```

#### การเข้าถึงเว็บแอปพลิเคชัน
- เปิดเว็บเบราว์เซอร์แล้วเข้าไปที่ URL:
  ```http://127.0.0.1:8001/```

### การทำงานของหน้าเว็บ

#### หน้า `index.html`
- แสดงสรุปข้อมูลจากทุกกลุ่ม (Group) และแสดงภาพรวมของสถานะต่างๆ (offline, online, test, pass, fail, abort)
- คลิกที่ภาพแผนผังเพื่อไปยังหน้า `realtime`

#### หน้า `realtime.html`
- มีฟังก์ชันให้เลือกกลุ่ม (Family) ที่ต้องการดูข้อมูล
- มี checkbox สำหรับซ่อนการ์ดที่มีค่าที่ไม่สมบูรณ์ (เช่น "undefined")
- อัปเดตข้อมูลอัตโนมัติทุก 3 นาที

### รายละเอียดการทำงานของโค้ด

#### `app.py`
- เป็นโค้ดฝั่งเซิร์ฟเวอร์ที่ใช้ Flask เพื่อจัดการกับการร้องขอ (request) และการตอบกลับ (response)
- มีฟังก์ชันหลัก ๆ เช่น `fetch_data_from_urls` สำหรับดึงข้อมูลจาก URL หลายๆ อันและบันทึกลงใน MongoDB

#### `script.js`
- จัดการการทำงานฝั่งไคลเอนต์ (client-side)
- ฟังก์ชัน `fetchData` ใช้ดึงข้อมูลจากเซิร์ฟเวอร์และแสดงผลในหน้า `realtime`
- ฟังก์ชัน `toggleUndefinedCards` ใช้สำหรับซ่อนการ์ดที่มีค่า "undefined"
- ฟังก์ชัน `showLoading` และ `hideLoading` ใช้สำหรับแสดงและซ่อนภาพเคลื่อนไหวระหว่างการดึงข้อมูล

#### `style.css`
- กำหนดรูปแบบการแสดงผลขององค์ประกอบต่างๆ บนหน้าเว็บ
- มีการตั้งค่ารูปแบบของการ์ด, แถบสรุป, และแถบนำทาง

### การแก้ไขปัญหา

1. **หากหน้าเว็บไม่โหลดข้อมูลหรือแสดงผลล่าช้า:**
   - ตรวจสอบสถานะของเซิร์ฟเวอร์ว่าเปิดใช้งานอยู่หรือไม่
   - ตรวจสอบว่า MongoDB ทำงานปกติและเชื่อมต่อกับแอปพลิเคชันได้หรือไม่
   - ตรวจสอบการตั้งค่า URL ใน `urls.py` และการดึงข้อมูลใน `app.py`
